<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<title>Bolinha Material</title>
		
	</head>
	
	<style>
		body{
			background-image: url("W XP LOGO.jpg")
		}
		#muhCanvas{
			border: 2px solid rgb(0,0,0);
			position:absolute;
			top: 100px;
			left: 300px;
		}
		#titulo{
			background-color: rgb(150,50,0);
			border: 5px solid rgb(0,0,0);
			width: 500px;
			position:absolute;
			top: 600px;
			left: 300px;
		}
		
	</style>
	
	<body>
		
		<canvas id="muhCanvas"></canvas>
		<h1 id="titulo">Bolinha fisica que interage com o mouse</h1>
		
		
	</body>
	
	<script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>
	
	<script>
		
		var programCode = function(processingInstance){
			with (processingInstance){
			size(500,500);
			frameRate(60);
			
			    
				var ellipseX = width/2;
				var ellipseY = height/2;
				var ellipseY_var =0;
				var ellipseX_var =0;
				var velTot=0;
				var mouseIsPressed = false;
				var bolinhaIsDragged = false;
				
				draw = function (){
				
					background(255,255,255);
					fill(255, 247, 0);
					ellipse(ellipseX,ellipseY,20,20);
					
					//atualiza as velocidades da bolinha
					ellipseY += ellipseY_var;
					ellipseX += ellipseX_var;
					
					//basicamente a gravidade e a normal do chão
					ellipseY_var +=0.5;
					if(ellipseY>height-10)ellipseY_var -=0.5;
					
					//chão e paredes
					if(ellipseY>height-10 && ellipseY_var>0){
						ellipseY_var = -ellipseY_var*0.8;
						ellipseY=height-10;
					}
					if(ellipseY>height-10){
						ellipseY=height-10;
					}
					if(ellipseX>width-10 && ellipseX_var>0) ellipseX_var = -ellipseX_var*0.8;
					if(ellipseX<10 && ellipseX_var<0) ellipseX_var = -ellipseX_var*0.8;
					
					mousePressed = function(){
						mouseIsPressed = true;
					}
					if(mouseIsPressed){
						if((mouseY<ellipseY+10 && mouseY>ellipseY-10 && mouseX<ellipseX+10 && mouseX>ellipseX-10)||bolinhaIsDragged){
						ellipseY_var =0;
						ellipseX_var =0;
						ellipseY = mouseY;
						ellipseX = mouseX;
						bolinhaIsDragged=true;
						}
					}
					
					mouseReleased = function(){
						ellipseY_var = (mouseY-mouseMemY);
						ellipseX_var = (mouseX-mouseMemX);
						mouseIsPressed=false;
						bolinhaIsDragged=false;
					}
					mouseMemY=mouseY;
					mouseMemX=mouseX;
					
					
				};
				
			
			
			
		}};
		
		
		var canvas = document.getElementById("muhCanvas"); 
		
		var processingInstance = new Processing(canvas, programCode); 
	</script>
</html>
